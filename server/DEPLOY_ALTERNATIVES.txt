Alternativas de Deploy - SGI Backend
=====================================

OPCAO 1: Railway.app (RECOMENDADO - Mais Simples)
--------------------------------------------------

Railway e a opcao mais simples e tem excelente suporte para Node.js/Express.

Passos:

1. Criar conta no Railway:
   - Vai a https://railway.app
   - Cria conta (podes usar GitHub)

2. Criar novo projeto:
   - Clica em "New Project"
   - Escolhe "Deploy from GitHub repo" (recomendado) ou "Empty Project"

3. Configurar variaveis de ambiente:
   - Vai a "Variables" no projeto
   - Adiciona todas as variaveis do .env:
     DATABASE_URL=postgresql://...
     JWT_SECRET=...
     JWT_REFRESH_SECRET=...
     DEFAULT_TENANT_ID=tenant-default
     PORT=5801
     NODE_ENV=production

4. Deploy:
   - Se usaste GitHub: Railway detecta automaticamente e faz deploy
   - Se usaste Empty Project: faz upload do codigo ou conecta GitHub repo

5. Configurar dominio:
   - Railway da-te uma URL automatica (ex: backend.up.railway.app)
   - Podes configurar dominio customizado se quiseres

Vantagens:
- Muito simples de configurar
- Suporte nativo para Node.js
- CORS funciona perfeitamente
- Plano gratuito generoso
- Deploy automatico do GitHub

OPCAO 2: Docker + ngrok (Para testes locais)
----------------------------------------------

Passos:

1. Criar Dockerfile (ja criado em server/Dockerfile)

2. Construir imagem:
   cd server
   docker build -t sgi-backend .

3. Executar container:
   docker run -p 5801:5801 \
     -e DATABASE_URL="postgresql://..." \
     -e JWT_SECRET="..." \
     -e JWT_REFRESH_SECRET="..." \
     -e DEFAULT_TENANT_ID="tenant-default" \
     sgi-backend

4. Instalar ngrok:
   Windows (PowerShell):
   choco install ngrok
   ou baixa de https://ngrok.com/download

5. Configurar ngrok:
   ngrok config add-authtoken SEU_TOKEN

6. Expor porta:
   ngrok http 5801

7. Usar URL do ngrok no frontend:
   - O ngrok da-te uma URL tipo: https://abc123.ngrok.io
   - Configura no frontend: VITE_API_BASE_URL=https://abc123.ngrok.io/api

Desvantagens:
- URL muda a cada reinicio (plano gratuito)
- Limite de conexoes no plano gratuito
- Precisa de manter o computador ligado

OPCAO 3: Render.com (Alternativa ao Railway)
---------------------------------------------

Similar ao Railway, mas com algumas diferencas.

Passos:

1. Criar conta: https://render.com

2. Criar novo Web Service:
   - Escolhe "New Web Service"
   - Conecta GitHub repo

3. Configurar:
   - Build Command: npm install && npx prisma generate
   - Start Command: npm run dev ou npm start
   - Environment: Node

4. Variaveis de ambiente: Adiciona todas as do .env

5. Deploy: Render faz deploy automatico

Vantagens:
- Simples como Railway
- Plano gratuito disponivel
- CORS funciona bem

COMPARACAO RAPIDA
-----------------

Plataforma      | Simplicidade | CORS | Custo  | Recomendacao
----------------|--------------|------|--------|-------------
Railway         | 5/5          | Sim  | Gratis | MELHOR
Render          | 4/5          | Sim  | Gratis | Muito bom
Docker+ngrok    | 2/5          | Sim  | Gratis | So para testes
Vercel          | 3/5          | Nao  | Gratis | Problemas CORS

RECOMENDACAO FINAL
------------------

Use Railway.app - E a opcao mais simples, funciona perfeitamente com CORS, e tem um plano gratuito generoso. O deploy e quase automatico e nao teras problemas de CORS.

Se precisares de ajuda com Railway, avisa!

Alternativas de Deploy - SGI Backend
=====================================

OPCAO 1: Railway.app (RECOMENDADO - Mais Simples)
--------------------------------------------------

Railway e a opcao mais simples e tem excelente suporte para Node.js/Express.

Passos:

1. Criar conta no Railway:
   - Vai a https://railway.app
   - Cria conta (podes usar GitHub)

2. Criar novo projeto:
   - Clica em "New Project"
   - Escolhe "Deploy from GitHub repo" (recomendado) ou "Empty Project"

3. Configurar variaveis de ambiente:
   - Vai a "Variables" no projeto
   - Adiciona todas as variaveis do .env:
     DATABASE_URL=postgresql://...
     JWT_SECRET=...
     JWT_REFRESH_SECRET=...
     DEFAULT_TENANT_ID=tenant-default
     PORT=5801
     NODE_ENV=production

4. Deploy:
   - Se usaste GitHub: Railway detecta automaticamente e faz deploy
   - Se usaste Empty Project: faz upload do codigo ou conecta GitHub repo

5. Configurar dominio:
   - Railway da-te uma URL automatica (ex: backend.up.railway.app)
   - Podes configurar dominio customizado se quiseres

Vantagens:
- Muito simples de configurar
- Suporte nativo para Node.js
- CORS funciona perfeitamente
- Plano gratuito generoso
- Deploy automatico do GitHub

OPCAO 2: Docker + ngrok (Para testes locais)
----------------------------------------------

Passos:

1. Criar Dockerfile (ja criado em server/Dockerfile)

2. Construir imagem:
   cd server
   docker build -t sgi-backend .

3. Executar container:
   docker run -p 5801:5801 \
     -e DATABASE_URL="postgresql://..." \
     -e JWT_SECRET="..." \
     -e JWT_REFRESH_SECRET="..." \
     -e DEFAULT_TENANT_ID="tenant-default" \
     sgi-backend

4. Instalar ngrok:
   Windows (PowerShell):
   choco install ngrok
   ou baixa de https://ngrok.com/download

5. Configurar ngrok:
   ngrok config add-authtoken SEU_TOKEN

6. Expor porta:
   ngrok http 5801

7. Usar URL do ngrok no frontend:
   - O ngrok da-te uma URL tipo: https://abc123.ngrok.io
   - Configura no frontend: VITE_API_BASE_URL=https://abc123.ngrok.io/api

Desvantagens:
- URL muda a cada reinicio (plano gratuito)
- Limite de conexoes no plano gratuito
- Precisa de manter o computador ligado

OPCAO 3: Render.com (Alternativa ao Railway)
---------------------------------------------

Similar ao Railway, mas com algumas diferencas.

Passos:

1. Criar conta: https://render.com

2. Criar novo Web Service:
   - Escolhe "New Web Service"
   - Conecta GitHub repo

3. Configurar:
   - Build Command: npm install && npx prisma generate
   - Start Command: npm run dev ou npm start
   - Environment: Node

4. Variaveis de ambiente: Adiciona todas as do .env

5. Deploy: Render faz deploy automatico

Vantagens:
- Simples como Railway
- Plano gratuito disponivel
- CORS funciona bem

COMPARACAO RAPIDA
-----------------

Plataforma      | Simplicidade | CORS | Custo  | Recomendacao
----------------|--------------|------|--------|-------------
Railway         | 5/5          | Sim  | Gratis | MELHOR
Render          | 4/5          | Sim  | Gratis | Muito bom
Docker+ngrok    | 2/5          | Sim  | Gratis | So para testes
Vercel          | 3/5          | Nao  | Gratis | Problemas CORS

RECOMENDACAO FINAL
------------------

Use Railway.app - E a opcao mais simples, funciona perfeitamente com CORS, e tem um plano gratuito generoso. O deploy e quase automatico e nao teras problemas de CORS.

Se precisares de ajuda com Railway, avisa!

